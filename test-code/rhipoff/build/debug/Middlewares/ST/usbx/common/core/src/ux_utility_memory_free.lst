ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 1


   1              		.cpu cortex-m33
   2              		.arch armv8-m.main
   3              		.fpu fpv4-sp-d16
   4              		.arch_extension dsp
   5              		.eabi_attribute 27, 1
   6              		.eabi_attribute 28, 1
   7              		.eabi_attribute 20, 1
   8              		.eabi_attribute 21, 1
   9              		.eabi_attribute 23, 3
  10              		.eabi_attribute 24, 1
  11              		.eabi_attribute 25, 1
  12              		.eabi_attribute 26, 1
  13              		.eabi_attribute 30, 1
  14              		.eabi_attribute 34, 1
  15              		.eabi_attribute 18, 4
  16              		.file	"ux_utility_memory_free.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.file 1 "Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c"
  21              		.section	.text._ux_utility_memory_free,"ax",%progbits
  22              		.align	1
  23              		.global	_ux_utility_memory_free
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	_ux_utility_memory_free:
  29              	.LVL0:
  30              	.LFB3:
   1:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
   2:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */
   3:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*       Copyright (c) Microsoft Corporation. All rights reserved.        */
   4:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */
   5:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*       This software is licensed under the Microsoft Software License   */
   6:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*       Terms for Microsoft Azure RTOS. Full text of the license can be  */
   7:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*       found in the LICENSE file at https://aka.ms/AzureRTOS_EULA       */
   8:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*       and in the root directory of this software.                      */
   9:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */
  10:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
  11:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  12:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  13:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
  14:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
  15:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**                                                                       */ 
  16:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /** USBX Component                                                        */ 
  17:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**                                                                       */
  18:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**   Utility                                                             */
  19:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**                                                                       */
  20:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
  21:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
  22:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  23:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  24:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /* Include necessary system files.  */
  25:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  26:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #define UX_SOURCE_CODE
  27:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  28:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #include "ux_api.h"
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 2


  29:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  30:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  31:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/ 
  32:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  33:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  FUNCTION                                               RELEASE        */ 
  34:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  35:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    _ux_utility_memory_free                             PORTABLE C      */ 
  36:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                           6.1.10       */
  37:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  AUTHOR                                                                */
  38:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */
  39:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    Chaoqiong Xiao, Microsoft Corporation                               */
  40:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */
  41:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  DESCRIPTION                                                           */
  42:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  43:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    This function frees a previously allocated memory block.            */ 
  44:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  45:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  INPUT                                                                 */ 
  46:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  47:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    memory                                Pointer to memory block       */ 
  48:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  49:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  OUTPUT                                                                */ 
  50:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  51:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    None                                                                */ 
  52:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  53:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  CALLS                                                                 */ 
  54:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  55:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    _ux_utility_mutex_on                  Start system protection       */ 
  56:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    _ux_utility_mutex_off                 End system protection         */ 
  57:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  58:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  CALLED BY                                                             */ 
  59:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  60:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    USBX Components                                                     */ 
  61:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  62:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  RELEASE HISTORY                                                       */ 
  63:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  64:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*    DATE              NAME                      DESCRIPTION             */ 
  65:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */ 
  66:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  05-19-2020     Chaoqiong Xiao           Initial Version 6.0           */
  67:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  09-30-2020     Chaoqiong Xiao           Modified comment(s),          */
  68:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                            resulting in version 6.1    */
  69:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*  01-31-2022     Chaoqiong Xiao           Modified comment(s),          */
  70:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                            added standalone support,   */
  71:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                            resulting in version 6.1.10 */
  72:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /*                                                                        */
  73:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** /**************************************************************************/
  74:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** VOID  _ux_utility_memory_free(VOID *memory)
  75:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** {
  31              		.loc 1 75 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		.loc 1 75 1 is_stmt 0 view .LVU1
  36 0000 08B5     		push	{r3, lr}
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
  76:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 3


  77:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** UX_MEMORY_BLOCK     *memory_block;
  40              		.loc 1 77 1 is_stmt 1 view .LVU2
  78:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** UX_MEMORY_BLOCK     *next_block;
  41              		.loc 1 78 1 view .LVU3
  79:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** ULONG               memory_size_returned;
  42              		.loc 1 79 1 view .LVU4
  80:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** UCHAR               *memory_address;
  43              		.loc 1 80 1 view .LVU5
  81:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #ifdef UX_ENABLE_MEMORY_POOL_SANITY_CHECK
  82:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** UCHAR               *regular_start, *regular_end;
  83:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** UCHAR               *cache_safe_start, *cache_safe_end;
  84:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #endif
  85:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  86:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Get the mutex as this is a critical section.  */
  87:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     _ux_system_mutex_on(&_ux_system -> ux_system_mutex);
  44              		.loc 1 87 5 view .LVU6
  45              		.loc 1 87 5 view .LVU7
  46              		.loc 1 87 5 view .LVU8
  88:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  89:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #ifdef UX_ENABLE_MEMORY_POOL_SANITY_CHECK
  90:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
  91:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Sanity check, check if the memory is in memory pool.  */
  92:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     regular_start = (UCHAR *)_ux_system -> ux_system_regular_memory_pool_start;
  93:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     regular_end = regular_start + _ux_system -> ux_system_regular_memory_pool_size;
  94:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     regular_start += sizeof(UX_MEMORY_BLOCK);
  95:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     cache_safe_start = (UCHAR *)_ux_system -> ux_system_cache_safe_memory_pool_start;
  96:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     cache_safe_end = cache_safe_start + _ux_system -> ux_system_cache_safe_memory_pool_size;
  97:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     cache_safe_start += sizeof(UX_MEMORY_BLOCK);
  98:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     memory_address = (UCHAR *)memory;
  99:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     if (!((memory_address >= regular_start    && memory_address < regular_end) ||
 100:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****           (memory_address >= cache_safe_start && memory_address < cache_safe_end)))
 101:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 102:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 103:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Not valid. Release the protection.  */
 104:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system_mutex_off(&_ux_system -> ux_system_mutex);
 105:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 106:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Error trap.  */
 107:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system_error_handler(UX_SYSTEM_LEVEL_THREAD,
 108:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****                                 UX_SYSTEM_CONTEXT_UTILITY, UX_MEMORY_CORRUPTED);
 109:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 110:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* No action taken.  */
 111:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         return;
 112:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 113:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #endif
 114:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 115:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* The memory block for this memory pointer is located right before the
 116:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****        memory.  */
 117:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     memory_block =  (UX_MEMORY_BLOCK *) (((UCHAR *) memory) - sizeof(UX_MEMORY_BLOCK));
  47              		.loc 1 117 5 view .LVU9
  48              	.LVL1:
 118:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     
 119:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Keep track of the memory returned to the pool.  */
 120:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     memory_size_returned = memory_block -> ux_memory_block_size + (ULONG)sizeof(UX_MEMORY_BLOCK);
  49              		.loc 1 120 5 view .LVU10
  50              		.loc 1 120 41 is_stmt 0 view .LVU11
  51 0002 50F8102C 		ldr	r2, [r0, #-16]
  52              		.loc 1 120 26 view .LVU12
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 4


  53 0006 02F1100C 		add	ip, r2, #16
  54              	.LVL2:
 121:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 122:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Check this memory block to see if it valid.  */
 123:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     if (memory_block -> ux_memory_block_status != (UX_MEMORY_USED | UX_REGULAR_MEMORY) &&
  55              		.loc 1 123 5 is_stmt 1 view .LVU13
  56              		.loc 1 123 22 is_stmt 0 view .LVU14
  57 000a 50F80C2C 		ldr	r2, [r0, #-12]
  58              		.loc 1 123 88 view .LVU15
  59 000e 02F10042 		add	r2, r2, #-2147483648
  60              		.loc 1 123 8 view .LVU16
  61 0012 012A     		cmp	r2, #1
  62 0014 17D8     		bhi	.L14
  63 0016 A0F11003 		sub	r3, r0, #16
  64              	.LVL3:
 124:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         memory_block -> ux_memory_block_status != (UX_MEMORY_USED | UX_CACHE_SAFE_MEMORY))
 125:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 126:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 127:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Not valid. Release the protection.  */
 128:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system_mutex_off(&_ux_system -> ux_system_mutex);
 129:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 130:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Error trap. */
 131:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system_error_handler(UX_SYSTEM_LEVEL_THREAD, UX_SYSTEM_CONTEXT_UTILITY, UX_MEMORY_CORRU
 132:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 133:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* If trace is enabled, insert this event into the trace buffer.  */
 134:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         UX_TRACE_IN_LINE_INSERT(UX_TRACE_ERROR, UX_MEMORY_CORRUPTED, memory, 0, 0, UX_TRACE_ERRORS,
 135:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 136:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Return to caller.  */
 137:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         return;
 138:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 139:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 140:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #ifdef UX_ENABLE_MEMORY_STATISTICS
 141:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 142:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Update allocate count, total size.  */
 143:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     if (memory_block -> ux_memory_block_status == (UX_MEMORY_USED | UX_REGULAR_MEMORY))
 144:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 145:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system -> ux_system_regular_memory_pool_alloc_count --;
 146:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system -> ux_system_regular_memory_pool_alloc_total -= memory_block -> ux_memory_block_
 147:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 148:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     else
 149:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 150:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system -> ux_system_cache_safe_memory_pool_alloc_count --;
 151:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system -> ux_system_cache_safe_memory_pool_alloc_total -= memory_block -> ux_memory_blo
 152:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 153:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** #endif
 154:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 155:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* We mark this memory block as being unused.  */
 156:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     memory_block -> ux_memory_block_status =  UX_MEMORY_UNUSED;
  65              		.loc 1 156 5 is_stmt 1 view .LVU17
  66              		.loc 1 156 44 is_stmt 0 view .LVU18
  67 001a 0022     		movs	r2, #0
  68 001c 40F80C2C 		str	r2, [r0, #-12]
 157:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     
 158:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Now we must concatenate as many free blocks as possible,
 159:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****        that include the blocks before and the blocks after the current
 160:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****        block.  Scan memory backwards.  */
 161:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 5


 162:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****      while (memory_block -> ux_memory_block_previous !=UX_NULL)
  69              		.loc 1 162 6 is_stmt 1 view .LVU19
  70              	.LVL4:
  71              	.L4:
  72              		.loc 1 162 54 view .LVU20
  73 0020 1946     		mov	r1, r3
  74              		.loc 1 162 26 is_stmt 0 view .LVU21
  75 0022 DB68     		ldr	r3, [r3, #12]
  76              	.LVL5:
  77              		.loc 1 162 54 view .LVU22
  78 0024 13B1     		cbz	r3, .L5
 163:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****      {
 164:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 165:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Check if the block is free.  */            
 166:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         if (memory_block -> ux_memory_block_previous -> ux_memory_block_status == UX_MEMORY_UNUSED)
  79              		.loc 1 166 9 is_stmt 1 view .LVU23
  80              		.loc 1 166 54 is_stmt 0 view .LVU24
  81 0026 5A68     		ldr	r2, [r3, #4]
  82              		.loc 1 166 12 view .LVU25
  83 0028 002A     		cmp	r2, #0
  84 002a F9D0     		beq	.L4
  85              	.L5:
 167:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 168:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             /* The memory block before is free. This will be our starting point to 
 169:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****                concatenate memory.  */
 170:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             memory_block =  memory_block -> ux_memory_block_previous;
 171:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 172:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         else
 173:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 174:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             /* The previous memory block is not free.  */
 175:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             break;
 176:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 177:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 178:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* The pointer to the memory block is now our first free block. We use this 
 179:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****        starting address to concatenate all the contiguous memory block.  */
 180:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     next_block =  memory_block -> ux_memory_block_next;
  86              		.loc 1 180 5 is_stmt 1 view .LVU26
  87              		.loc 1 180 16 is_stmt 0 view .LVU27
  88 002c 8B68     		ldr	r3, [r1, #8]
  89              	.LVL6:
 181:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     while (next_block != UX_NULL)
  90              		.loc 1 181 5 is_stmt 1 view .LVU28
  91              	.L7:
  92              		.loc 1 181 23 view .LVU29
  93 002e 93B1     		cbz	r3, .L9
 182:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 183:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 184:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Determine if the memory block is used.  */
 185:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         if (next_block -> ux_memory_block_status != UX_MEMORY_UNUSED)
  94              		.loc 1 185 9 view .LVU30
  95              		.loc 1 185 24 is_stmt 0 view .LVU31
  96 0030 5A68     		ldr	r2, [r3, #4]
  97              		.loc 1 185 12 view .LVU32
  98 0032 72B9     		cbnz	r2, .L15
 186:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         {
 187:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 188:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             /* Yes, move to next block.  */
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 6


 189:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             memory_block -> ux_memory_block_next =  next_block;
 190:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             next_block -> ux_memory_block_previous =  memory_block;
 191:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             break;
 192:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         }
 193:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 194:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         memory_block -> ux_memory_block_next =  next_block -> ux_memory_block_next;
  99              		.loc 1 194 9 is_stmt 1 view .LVU33
 100              		.loc 1 194 60 is_stmt 0 view .LVU34
 101 0034 9A68     		ldr	r2, [r3, #8]
 102              		.loc 1 194 46 view .LVU35
 103 0036 8A60     		str	r2, [r1, #8]
 195:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         memory_block -> ux_memory_block_size +=  next_block -> ux_memory_block_size + (ULONG)sizeof
 104              		.loc 1 195 9 is_stmt 1 view .LVU36
 105              		.loc 1 195 22 is_stmt 0 view .LVU37
 106 0038 0A68     		ldr	r2, [r1]
 107              		.loc 1 195 61 view .LVU38
 108 003a 1868     		ldr	r0, [r3]
 109              		.loc 1 195 46 view .LVU39
 110 003c 0244     		add	r2, r2, r0
 111 003e 1032     		adds	r2, r2, #16
 112 0040 0A60     		str	r2, [r1]
 196:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         next_block =  next_block -> ux_memory_block_next;                       
 113              		.loc 1 196 9 is_stmt 1 view .LVU40
 114              		.loc 1 196 20 is_stmt 0 view .LVU41
 115 0042 9B68     		ldr	r3, [r3, #8]
 116              	.LVL7:
 117              		.loc 1 196 20 view .LVU42
 118 0044 F3E7     		b	.L7
 119              	.LVL8:
 120              	.L14:
 128:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 121              		.loc 1 128 9 is_stmt 1 view .LVU43
 128:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 122              		.loc 1 128 9 view .LVU44
 128:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 123              		.loc 1 128 9 view .LVU45
 131:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 124              		.loc 1 131 9 view .LVU46
 125 0046 1922     		movs	r2, #25
 126 0048 0821     		movs	r1, #8
 127 004a 0220     		movs	r0, #2
 128              	.LVL9:
 131:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 129              		.loc 1 131 9 is_stmt 0 view .LVU47
 130 004c FFF7FEFF 		bl	_ux_system_error_handler
 131              	.LVL10:
 137:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 132              		.loc 1 137 9 is_stmt 1 view .LVU48
 133 0050 18E0     		b	.L1
 134              	.LVL11:
 135              	.L15:
 189:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             next_block -> ux_memory_block_previous =  memory_block;
 136              		.loc 1 189 13 view .LVU49
 189:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             next_block -> ux_memory_block_previous =  memory_block;
 137              		.loc 1 189 50 is_stmt 0 view .LVU50
 138 0052 8B60     		str	r3, [r1, #8]
 190:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             break;
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 7


 139              		.loc 1 190 13 is_stmt 1 view .LVU51
 190:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             break;
 140              		.loc 1 190 52 is_stmt 0 view .LVU52
 141 0054 D960     		str	r1, [r3, #12]
 191:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         }
 142              		.loc 1 191 13 is_stmt 1 view .LVU53
 143              	.L9:
 197:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 198:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 199:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Update the memory free in the appropriate pool.  We need to know if this 
 200:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****        block is in regular memory or cache safe memory.  */
 201:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     if(_ux_system -> ux_system_cache_safe_memory_pool_start == _ux_system -> ux_system_regular_memo
 144              		.loc 1 201 5 view .LVU54
 145              		.loc 1 201 19 is_stmt 0 view .LVU55
 146 0056 0C4B     		ldr	r3, .L17
 147              	.LVL12:
 148              		.loc 1 201 19 view .LVU56
 149 0058 1B68     		ldr	r3, [r3]
 150 005a D868     		ldr	r0, [r3, #12]
 151              		.loc 1 201 75 view .LVU57
 152 005c 1A68     		ldr	r2, [r3]
 153              		.loc 1 201 7 view .LVU58
 154 005e 9042     		cmp	r0, r2
 155 0060 09D0     		beq	.L16
 202:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 203:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 204:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* There is only one regular memory pool.  */
 205:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         _ux_system -> ux_system_regular_memory_pool_free += memory_size_returned;
 206:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 207:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 208:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     else
 209:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     {
 210:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 211:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* Which pool is this memory in ?  */
 212:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         memory_address = (UCHAR *) _ux_system -> ux_system_regular_memory_pool_start;
 156              		.loc 1 212 9 is_stmt 1 view .LVU59
 157              	.LVL13:
 213:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 214:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         /* If the memory address is in this range, we are in the regular memory pool.  */
 215:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         if ((UCHAR *) memory_block >= memory_address && (UCHAR *) memory_block < (memory_address + 
 158              		.loc 1 215 9 view .LVU60
 159              		.loc 1 215 12 is_stmt 0 view .LVU61
 160 0062 8A42     		cmp	r2, r1
 161 0064 0BD8     		bhi	.L12
 162              		.loc 1 215 111 discriminator 1 view .LVU62
 163 0066 5868     		ldr	r0, [r3, #4]
 164              		.loc 1 215 98 discriminator 1 view .LVU63
 165 0068 0244     		add	r2, r2, r0
 166              	.LVL14:
 167              		.loc 1 215 54 discriminator 1 view .LVU64
 168 006a 8A42     		cmp	r2, r1
 169 006c 07D9     		bls	.L12
 216:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 217:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             /* Update the regular memory pool.  */
 218:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             _ux_system -> ux_system_regular_memory_pool_free += memory_size_returned;
 170              		.loc 1 218 13 is_stmt 1 view .LVU65
 171              		.loc 1 218 24 is_stmt 0 view .LVU66
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 8


 172 006e 9A68     		ldr	r2, [r3, #8]
 173              		.loc 1 218 62 view .LVU67
 174 0070 6244     		add	r2, r2, ip
 175 0072 9A60     		str	r2, [r3, #8]
 176 0074 06E0     		b	.L1
 177              	.LVL15:
 178              	.L16:
 205:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 179              		.loc 1 205 9 is_stmt 1 view .LVU68
 205:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 180              		.loc 1 205 20 is_stmt 0 view .LVU69
 181 0076 9A68     		ldr	r2, [r3, #8]
 205:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 182              		.loc 1 205 58 view .LVU70
 183 0078 6244     		add	r2, r2, ip
 184 007a 9A60     		str	r2, [r3, #8]
 185 007c 02E0     		b	.L1
 186              	.LVL16:
 187              	.L12:
 219:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 220:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         else
 221:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 222:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             /* Update the cache safe memory pool.  */
 223:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****             _ux_system -> ux_system_cache_safe_memory_pool_free += memory_size_returned;
 188              		.loc 1 223 13 is_stmt 1 view .LVU71
 189              		.loc 1 223 24 is_stmt 0 view .LVU72
 190 007e 5A69     		ldr	r2, [r3, #20]
 191              		.loc 1 223 65 view .LVU73
 192 0080 6244     		add	r2, r2, ip
 193 0082 5A61     		str	r2, [r3, #20]
 194              	.LVL17:
 195              	.L1:
 224:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****         
 225:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     }
 226:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 227:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Release the protection.  */
 228:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     _ux_system_mutex_off(&_ux_system -> ux_system_mutex);
 229:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** 
 230:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     /* Return to caller.  */
 231:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c ****     return;
 232:Middlewares/ST/usbx/common/core/src/ux_utility_memory_free.c **** }
 196              		.loc 1 232 1 view .LVU74
 197 0084 08BD     		pop	{r3, pc}
 198              	.L18:
 199 0086 00BF     		.align	2
 200              	.L17:
 201 0088 00000000 		.word	_ux_system
 202              		.cfi_endproc
 203              	.LFE3:
 205              		.text
 206              	.Letext0:
 207              		.file 2 "Middlewares/ST/usbx/ports/generic/inc/ux_port.h"
 208              		.file 3 "Middlewares/ST/usbx/common/core/inc/ux_api.h"
 209              		.file 4 "Middlewares/ST/usbx/common/core/inc/ux_system.h"
 210              		.file 5 "Middlewares/ST/usbx/common/core/inc/ux_utility.h"
ARM GAS  C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 ux_utility_memory_free.c
C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s:22     .text._ux_utility_memory_free:00000000 $t
C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s:28     .text._ux_utility_memory_free:00000000 _ux_utility_memory_free
C:\Users\sapph\AppData\Local\Temp\cciJZM9o.s:201    .text._ux_utility_memory_free:00000088 $d

UNDEFINED SYMBOLS
_ux_system_error_handler
_ux_system
